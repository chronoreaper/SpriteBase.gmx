<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>selection = 0
selected[0]=-1
selected[1]=-1
selected[2]=-1
selected[3]=-1
toSelect=0

del=4
delay=0

unitList[0] = 0
unitList[1] = oFighter
unitList[2] = oArcher
unitList[3] = oMage
unitList[4] = oThunderMage
unitList[5] = oIceMage
unitList[6] = oDefender
//unitList[7] = oHealer
//unitList[8] = oBarrier_Mage

maxUnits=array_length_1d(unitList)
maxPlayers=4
charPerRow=6

//create options
var c= charPerRow
for(var j=0;j&lt;array_length_1d(unitList);j++)
{   
    var inst = instance_create((j%c)*30+view_wview/2-45,76+floor(j/c)*30,oCharCreationSelection);
    var obj = unitList[j]
    var list = ds_map_find_value(oControler.defUnits,obj);
    inst.index=j
    inst.sprite = randomUnit
    inst.name = "RANDOM"
    inst.hp = 0
    inst.obj = obj
    inst.locked = -1
    if j&gt;0{
        inst.sprite=list[|1]
        inst.name=list[|0]
        inst.hp=list[|2]
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with oCharCreationSelection
    instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if oControler.controler = 0{
    selection=-2
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if keyboard_check_pressed(oControler.keys[5])||mouse_check_button_pressed(mb_right){
    if toSelect=0{
        oControler.menu=0
        instance_destroy()
    }else{
        toSelect--
        selected[toSelect]=-1
    }
}

if oControler.controler = 0{//mouse
    if point_in_rectangle(mouse_x,mouse_y,(3)*(view_wview/5)-44,view_hview-35,(3)*(view_wview/5)+43,view_hview-11)
    {
        selection=-1
    }
    
}

if keyboard_check_pressed(oControler.keys[4])||mouse_check_button_pressed(mb_left){
    if selection=-1{//start game
        if toSelect&gt;0{
        if global.mobile{
            view_hview = 120
            view_wview= 180
        }
        oControler.menu=99
        for(var i =0;i&lt;maxPlayers;i++){
            if selected[i] = 0{
                var unit=unitList[irandom_range(1,maxUnits-1)]
                var inList = true
                while inList{
                    inList=false
                    for(var k =0;k&lt;maxPlayers;k++)
                        if unit=selected[k]{
                            inList=true
                            unit=unitList[irandom_range(1,maxUnits)]
                        }
                }
                selected[i] = unit
            }
            oControler.unitSelect[i]=selected[i]
        }
        instance_destroy()
        }
    }else if selection &gt;= 0{
        var removed = false
        if unitList[selection]!=0||toSelect=maxPlayers
            for (var i=0;i&lt;maxPlayers;i++){
                if selected[i] = unitList[selection]
                if  !removed{
                    removed = true
                    selected[i]=-1
                    toSelect--
                }
            }
        if !removed &amp;&amp; toSelect&lt;maxPlayers{
            var placed = false
            for (var i=0;i&lt;maxPlayers;i++){
                if !placed
                if selected[i]=-1{
                    placed=true
                    selected[i] = unitList[selection]
                }
            }
            toSelect++
        }
    }
}
//keyboard
if delay=0{
//right
if keyboard_check(oControler.keys[3]){
    selection++
    delay = del
    if selection&gt;=array_length_1d(unitList){
        selection=-1
    }
}
//left
if keyboard_check(oControler.keys[1]){
    selection--
    delay = del
    if selection&lt;-1{
        selection=array_length_1d(unitList)-1
    }
}
//up
if keyboard_check(oControler.keys[0]){
    if selection=-1{
        selection=array_length_1d(unitList)-1
    }else{
        selection-=charPerRow
        if selection&lt;0
            selection=-1
    }

    delay = del
}
//down
if keyboard_check(oControler.keys[2]){
    selection+=charPerRow
    delay = del
    if selection&gt;=array_length_1d(unitList){
        selection=-1
    }
}
}
else
    delay--
if !keyboard_check(oControler.keys[0])
&amp;&amp;!keyboard_check(oControler.keys[1])
&amp;&amp;!keyboard_check(oControler.keys[2])
&amp;&amp;!keyboard_check(oControler.keys[3]){
    delay = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var c = charPerRow

draw_set_halign(fa_center)
draw_set_font(pixelFont)
draw_set_colour(c_white)
draw_text_transformed(view_wport/2,15,"CHARACTER SELECTION",2,2,0)
    
if selection&gt;=0
    draw_sprite_ext(sprite63,0,view_wview/2+(selection%c)*30-60,50+floor(selection/c)*30,2,2,0,-1,1)

//close up description
if selection&gt;=0{
var obj = unitList[selection]
var list = ds_map_find_value(oControler.defUnits,obj)
var sprite = randomUnit
var name = "RANDOM"
var hp = 0
var desc = ""
var locked = -1
if selection&gt;0{
    sprite=list[|1]
    name=list[|0]
    hp=list[|2]
    desc = unit_description(obj)
}

var i=0
var xOff = -10
draw_set_colour(c_dkgray)
draw_rectangle((1+i)*(view_wview/5)-31+xOff,10,(1+i)*(view_wview/5)+30+xOff,view_hview-10,false)
draw_set_colour(c_ltgray)
draw_rectangle((1+i)*(view_wview/5)-27+xOff,15,(1+i)*(view_wview/5)+26+xOff,65,false)
draw_sprite_ext(sprite,0,(1+i)*(view_wview/5)+xOff,60,2,2,0,-1,1)
draw_set_colour(c_orange)
draw_text_transformed((1+i)*(view_wview/5)+6+xOff,view_hview-170,"CLASS ",2,2,0)
draw_text_transformed((1+i)*(view_wview/5)+6+xOff,view_hview-130,"STATS ",2,2,0)
draw_set_colour(c_ltgray)
draw_text_ext((1+i)*(view_wview/5)+xOff,view_hview-110,desc,7,40)
draw_text_transformed((1+i)*(view_wview/5)+xOff,view_hview-158,name,1,1,0)
draw_text((1+i)*(view_wview/5)+xOff,view_hview-151,string(selection+1)+"/"+string(array_length_1d(unitList)))
//draw_text_transformed((1+i)*(view_wview/5),view_hview-45,"REMOVE",2,2,0)
//draw_text_transformed((1+i)*(view_wview/5),view_hview-25,"START",2,2,0)
draw_set_colour(c_white)
//draw stats
draw_text((1+i)*(view_wview/5)+xOff,view_hview-143,"HP:"+string(hp));
}

//draw start button
draw_set_colour(c_dkgray)
draw_set_font(pixelFont)
draw_set_halign(fa_center)
draw_rectangle((2.5)*(view_wview/5)-44,view_hview-35,(2.5)*(view_wview/5)+43,view_hview-11,false)
var selText = "START"
draw_set_colour(c_ltgray)
if selection = -1{
    draw_set_colour(c_white)
    selText = "-START-"
}
draw_text_transformed((2.5)*(view_wview/5)+2,view_hview-28,selText,2,2,0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(0,0,0,0,0,0,0,0,0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
